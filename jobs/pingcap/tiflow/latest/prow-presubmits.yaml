# struct ref: https://pkg.go.dev/k8s.io/test-infra/prow/config#Presubmit
presubmits:
  pingcap/tiflow:
    - name: pingcap/tiflow/pull_cdc_integration_kafka_test
      agent: jenkins
      decorate: false # need add this.
      always_run: false
      # context: idc-jenkins-ci-ticdc/kafka-integration-test
      context: wip/cdc-integration-kafka-test
      skip_report: true
      trigger: "(?m)^/test (?:.*? )?cdc-integration-kafka-test(?: .*?)?$"
      rerun_command: "/test cdc-integration-kafka-test"
      branches:
        - ^master$
    - name: pingcap/tiflow/pull_cdc_integration_mysql_test
      agent: jenkins
      decorate: false # need add this.
      always_run: false
      # context: idc-jenkins-ci-ticdc/integration-test
      context: wip/cdc-integration-mysql-test
      skip_report: true
      trigger: "(?m)^/test (?:.*? )?cdc-integration-mysql-test(?: .*?)?$"
      rerun_command: "/test cdc-integration-mysql-test"
      branches:
        - ^master$
    - name: pingcap/tiflow/pull_dm_compatibility_test
      agent: jenkins
      decorate: false # need add this.
      always_run: false
      # context: idc-jenkins-ci-ticdc/dm-compatibility-test
      context: wip/dm-compatibility-test
      skip_report: true
      trigger: "(?m)^/test (?:.*? )?dm-compatibility-test(?: .*?)?$"
      rerun_command: "/test dm-compatibility-test"
      branches:
        - ^master$
    - name: pingcap/tiflow/pull_dm_integration_test
      agent: jenkins
      decorate: false # need add this.
      always_run: false
      # context: idc-jenkins-ci-ticdc/dm-integration-test
      context: wip/dm-integration-test
      skip_report: true
      trigger: "(?m)^/test (?:.*? )?dm-integration-test(?: .*?)?$"
      rerun_command: "/test dm-integration-test"
      branches:
        - ^master$
    - name: pingcap/tiflow/pull_engine_integration_test
      agent: jenkins
      decorate: false # need add this.
      always_run: false
      # context: idc-jenkins-ci-ticdc/engine-integration-test
      context: wip/engine-integration-test
      skip_report: true
      trigger: "(?m)^/test (?:.*? )?engine-integration-test(?: .*?)?$"
      rerun_command: "/test engine-integration-test"
      branches:
        - ^master$


